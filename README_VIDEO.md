# 使用自定义视频文件与语音提取

本项目允许您提供自己的视频文件，从中提取语音特征并用于AI回复的语音合成。

## 视频文件准备指南

1. **视频文件要求**:
   - 文件格式: MP4 (推荐)
   - 包含清晰的人声
   - 视频长度建议不少于3秒
   - 视频质量不限，但音频质量越好越容易提取特征

2. **文件位置**:
   您需要将视频文件放置在以下目录:
   ```
   public/animations/default-character.mp4
   ```

3. **注意事项**:
   - 视频文件必须命名为 `default-character.mp4`
   - 系统会提取视频中的音频特征，包括音高、语速等
   - 视频也会作为AI回复时的动画显示

## 系统工作流程

1. 当应用启动时，系统会加载您提供的视频文件
2. 从视频中提取音频特征（音高、语速、音量）
3. 当AI回复时，系统会使用这些特征生成类似于视频中声音的语音
4. 同时，视频会作为动画播放（静音播放，只用于视觉效果）

## 故障排除

如果遇到问题:

1. **视频无法加载**:
   - 检查视频文件路径是否正确
   - 确保视频格式为MP4
   - 检查浏览器控制台是否有错误信息

2. **无法提取音频特征**:
   - 确保视频包含清晰的人声
   - 尝试使用不同的视频文件
   - 检查浏览器是否支持音频处理API

3. **语音合成不匹配**:
   - 语音特征提取是一个简化过程，无法完美复制原始声音
   - 可以在控制台查看提取的参数值，了解提取效果

## 手动调整参数

如果自动提取的参数不符合预期，您可以：

1. 在"高级设置"中查看当前提取的语音参数
2. 修改代码中的映射函数，调整音高和语速的范围
   - 文件: `src/components/CharacterAnimation.tsx`
   - 位置: `extractAudioFeatures` 函数中的 `features` 对象

修改后重新启动应用，系统会重新提取特征。